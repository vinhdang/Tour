@using Domain;
@using Service.Helpers;
@model  List<Tour> 
@if (Model != null && Model.Count > 0)
{
    int i = 0;
    <div class="proList">
        @foreach (var item in Model)
        {
            DateTime startdate = DateTime.Today;
            DateTime enddate = startdate.AddHours(23.99);
            TourPrice price = item.TourPrices.Where(r => r.Date >= startdate && r.Date <= enddate && r.NumberGuest > 0 && r.IsActive).FirstOrDefault();

            switch (i)
            {
                case 0:
                case 1:
                case 2:
            <div class="proItems">
                <a href="@UrlHelp.getHotelUrl(item.National.Name, item.Province.Name, item.Url, item.ApartmentID, item.ProvinceID)" title="@item.Name">
                    <h4>
                        @if (item.ApartmentPictures != null && item.ApartmentPictures.Count() > 0)
                        {

                            ApartmentPicture info = item.ApartmentPictures.OrderByDescending(p => p.Order).ThenByDescending(p => p.CreatedDate).FirstOrDefault(pic => pic.IsActive && pic.IsAvartar);

                            if (info != null)
                            {
                            <img src="@FileHelper.GetApartment_Picture(info.FileName, info.ApartmentID)" width="285px" height="195px" alt="@info.Alt"  />
                            }
                        }
                    </h4>
                    <h1>
                        @item.Name</h1>
                </a>
                @if (price != null)
                {
                    <p>
                        <span>@String.Format("{0:#,###}", price.Price)</span>/đêm</p>
                  
                       
                }
                <a href="@UrlHelp.getProvinceUrl(item.National.Name, item.Province.Url, item.ProvinceID)" title="@item.Province.Name - @item.National.Name" >
                    <div class="proPlace">
                        @item.Province.Name
                    </div>
                </a>
            </div>
                   break;
                case 3:
            <div class="clear">
            </div>
            <div class="proItemsLarge">
                <a href="@UrlHelp.getHotelUrl(item.National.Name, item.Province.Name, item.Url, item.ApartmentID, item.ProvinceID)" title="@item.Name">
                    <h4>
                        @if (item.ApartmentPictures != null && item.ApartmentPictures.Count() > 0)
                        {

                            ApartmentPicture info = item.ApartmentPictures.OrderByDescending(p => p.Order).ThenByDescending(p => p.CreatedDate).FirstOrDefault(pic => pic.IsActive && pic.IsAvartar);

                            if (info != null)
                            {
                            <img src="@FileHelper.GetApartment_Picture(info.FileName, info.ApartmentID)" width="450px" height="270px" alt="@info.Alt"  />
                            }
                        }
                    </h4>
                    <div class="proContent">
                        <h2>
                            @item.Name</h2>
                        <p>
                            @item.Address</p>
                    </div>
                </a>
                @if (price != null)
                {
                    <div class="proPrice">
                        <span>@String.Format("{0:#,###}", price.Price) <span class="txtSmall">vnd</span></span></div>
                  
                       
                }
            </div>

                break;
                case 4:
            <div class="proItemsLarge">
                <a href="@UrlHelp.getHotelUrl(item.National.Name, item.Province.Name, item.Url, item.ApartmentID, item.ProvinceID)" title="@item.Name">
                    <h4>
                        @if (item.ApartmentPictures != null && item.ApartmentPictures.Count() > 0)
                        {

                            ApartmentPicture info = item.ApartmentPictures.OrderByDescending(p => p.Order).ThenByDescending(p => p.CreatedDate).FirstOrDefault(pic => pic.IsActive && pic.IsAvartar);

                            if (info != null)
                            {
                            <img src="@FileHelper.GetApartment_Picture(info.FileName, info.ApartmentID)" width="450px" height="270px" alt="@info.Alt"  />
                            }
                        }
                    </h4>
                    <div class="proContent">
                        <h2>
                            @item.Name</h2>
                        <p>
                            @item.Address</p>
                    </div>
                </a>
                @if (price != null)
                {
                    <div class="proPrice">
                        <span>@String.Format("{0:#,###}", price.Price) <span class="txtSmall">vnd</span></span></div>
                  
                       
                }
            </div> 
            
                break;

                case 5:
                case 6:
                case 7:
           
            <div class="proItems">
                <a href="@UrlHelp.getHotelUrl(item.National.Name, item.Province.Name, item.Url, item.ApartmentID, item.ProvinceID)" title="@item.Name">
                    <h4>
                        @if (item.ApartmentPictures != null && item.ApartmentPictures.Count() > 0)
                        {

                            ApartmentPicture info = item.ApartmentPictures.OrderByDescending(p => p.Order).ThenByDescending(p => p.CreatedDate).FirstOrDefault(pic => pic.IsActive && pic.IsAvartar);

                            if (info != null)
                            {
                            <img src="@FileHelper.GetApartment_Picture(info.FileName, info.ApartmentID)" width="285px" height="195px" alt="@info.Alt"  />
                            }
                        }
                    </h4>
                    <h1>
                        @item.Name</h1>
                </a>
                @if (price != null)
                {
                    <p>
                        <span>@String.Format("{0:#,###}", price.Price)</span>/đêm</p>
                  
                       
                }
                <a href="@UrlHelp.getProvinceUrl(item.National.Name, item.Province.Url, item.ProvinceID)" title="@item.Province.Name - @item.National.Name" >
                    <div class="proPlace">
                        @item.Province.Name
                    </div>
                </a>
            </div>

                   break;
                case 8:
            <div class="clear">
            </div>
            <div class="proItemsLarge">
                <a href="@UrlHelp.getHotelUrl(item.National.Name, item.Province.Name, item.Url, item.ApartmentID, item.ProvinceID)" title="@item.Name">
                    <h4>
                        @if (item.ApartmentPictures != null && item.ApartmentPictures.Count() > 0)
                        {

                            ApartmentPicture info = item.ApartmentPictures.OrderByDescending(p => p.Order).ThenByDescending(p => p.CreatedDate).FirstOrDefault(pic => pic.IsActive && pic.IsAvartar);

                            if (info != null)
                            {
                            <img src="@FileHelper.GetApartment_Picture(info.FileName, info.ApartmentID)" width="450px" height="270px" alt="@info.Alt"  />
                            }
                        }
                    </h4>
                    <div class="proContent">
                        <h2>
                            @item.Name</h2>
                        <p>
                            @item.Address</p>
                    </div>
                </a>
                @if (price != null)
                {
                    <div class="proPrice">
                        <span>@String.Format("{0:#,###}", price.Price) <span class="txtSmall">vnd</span></span></div>
                  
                       
                }
            </div>

                break;
                case 9:
            <div class="proItemsLarge">
                <a href="@UrlHelp.getHotelUrl(item.National.Name, item.Province.Name, item.Url, item.ApartmentID, item.ProvinceID)" title="@item.Name">
                    <h4>
                        @if (item.ApartmentPictures != null && item.ApartmentPictures.Count() > 0)
                        {

                            ApartmentPicture info = item.ApartmentPictures.OrderByDescending(p => p.Order).ThenByDescending(p => p.CreatedDate).FirstOrDefault(pic => pic.IsActive && pic.IsAvartar);

                            if (info != null)
                            {
                            <img src="@FileHelper.GetApartment_Picture(info.FileName, info.ApartmentID)" width="450px" height="270px" alt="@info.Alt"  />
                            }
                        }
                    </h4>
                    <div class="proContent">
                        <h2>
                            @item.Name</h2>
                        <p>
                            @item.Address</p>
                    </div>
                </a>
                @if (price != null)
                {
                    <div class="proPrice">
                        <span>@String.Format("{0:#,###}", price.Price) <span class="txtSmall">vnd</span></span></div>
                  
                       
                }
            </div> 
            
                break;
            }
            i++;
        }
        <div class="clear">
        </div>
    </div>
}